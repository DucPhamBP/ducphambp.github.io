<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Regression</title>
  <!-- Include MathJax -->
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
  <link rel="stylesheet" href="../assets/css/blog-style_19092025.css" />
  <script>
  window.MathJax = {tex: {inlineMath: [['$', '$'], ['\\(', '\\)']]}};
  </script>
  <script id="MathJax-script" async
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
  <!-- Highlight.js (for pseudocode formatting) -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <meta name="google-site-verification" content="jLINftPc2usot5IQ6UOX2KdpAL8ECz7nBPBUvhk3ibQ" />
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FG7W87X5LZ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-FG7W87X5LZ');
    </script>
</head>
<body>

  <!-- Navbar -->
  <header class="main-navbar">
    <div class="navbar-container">
      <div class="navbar-left"><a href="../index.html">Homepage</a></div>
      <nav class="navbar-right">
        <a href="../index.html#about">About</a>
        <a href="../project.html">Project</a>
        <a href="../blog.html" class="active">Blog</a>
      </nav>
    </div>
  </header>

  <!-- Main content -->
  <main class="content">
   <h1>Stochastic Optimization: bài toán nguời nông dân (The farmer’s problem)</h1>
   <p class="date">Posted: 26/12/2025</p>
<p class="alignment">Bài toán người nông dân (Farmer’s problem) là một ví dụ kinh điển trong stochastic optimization , 
được sử dụng trong các sách "Introduction to Stochastic Programming" của Birge và Louveaux, dùng để minh họa cách mô hình hóa (modelling) và giải (solve) các bài toán ra quyết định dưới điều kiện không chắc chắn (uncertainty). 
Bài toán thể hiện cấu trúc two-stage stochastic program với recourse, trong đó các quyết định phải được đưa ra trước khi các biến ngẫu nhiên được hiện thực hóa, và sau đó được điều chỉnh thông qua các quyết định bù (recourse decisions) khi thông tin không chắc chắn trở nên rõ ràng.
Trong bài viết này, tôi sẽ hướng dẫn cách mô hình hóa bài toán dưới dạng stochastic programming, và cung cấp cách lập trình để tìm nghiệm tối ưu thông qua ngôn ngữ AMPL và Python.
<h2>1. Mô tả bài toán</h2></p>

<p class="alignment">Một người nông dân có 500 acres đất trồng trọt và trồng ba loại cây:</p>
<ul>
    <li>Lúa mì (wheat)</li>
    <li>Bắp (Corn)</li>
    <li>Củ cải đường (Sugar beets)</li>
</ul>

<p class="alignment">Trước khi biết điều kiện thời tiết của năm tới (weather scenario), người nông dân phải quyết định diện tích đất dành cho từng loại cây (first-stage decisions). 
  Trang trại cần tối thiểu 200 tấn lúa mì và 240 tấn bắp để làm thức ăn cho gia súc. Các số lượng này có thể được sản xuất trên trang trại hoặc mua từ trung gian. Phần dư có thể bán ra thị trường.</p>

<p class="alignment">Giá bán trung bình:</p>
<ul>
    <li>Lúa mì: 170 $/tấn</li>
    <li>Bắp: 150 $/tấn</li>
</ul>

<p class="alignment">Giá mua cao hơn 40% so với giá bán. Củ cải đường có giá bán 36 USD/tấn cho tối đa 6000 tấn; phần vượt định mức chỉ bán được với giá 10 USD/tấn .</p>

Số liệu được thể hiện qua bảng sau:

<table style="border-collapse: collapse; width: 100%;">
    <tr>
        <th style="border:1px solid black; padding:6px; text-align:center;">Crop</th>
        <th style="border:1px solid black; padding:6px; text-align:center;">Yield (T/acre)</th>
        <th style="border:1px solid black; padding:6px; text-align:center;">Planting cost ($/acre)</th>
        <th style="border:1px solid black; padding:6px; text-align:center;">Selling price ($/T)</th>
        <th style="border:1px solid black; padding:6px; text-align:center;">Purchase price ($/T)</th>
        <th style="border:1px solid black; padding:6px; text-align:center;">Minimum requirement (T)</th>
    </tr>
    <tr>
        <td style="border:1px solid black; padding:6px; text-align:center;">Lúa mì</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">2.5</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">150</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">170</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">238</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">200</td>
    </tr>
    <tr>
        <td style="border:1px solid black; padding:6px; text-align:center;">Bắp</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">3.0</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">230</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">150</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">210</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">240</td>
    </tr>
    <tr>
        <td style="border:1px solid black; padding:6px; text-align:center;">Củ cải đường</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">20</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">260</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">36 (≤6000), 10 (>6000)</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">–</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">–</td>
    </tr>
</table>

Các kịch bản về thời tiết (Weather scenarios)</h2>

<table style="border-collapse: collapse; width: 100%;">
    <tr>
        <th style="border:1px solid black; padding:6px; text-align:center;">Scenario</th>
        <th style="border:1px solid black; padding:6px; text-align:center;">Description</th>
        <th style="border:1px solid black; padding:6px; text-align:center;">Yield factor</th>
        <th style="border:1px solid black; padding:6px; text-align:center;">Probability</th>
    </tr>
    <tr>
        <td style="border:1px solid black; padding:6px; text-align:center;">s = 1</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">Good year</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">+20%</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">1/3</td>
    </tr>
    <tr>
        <td style="border:1px solid black; padding:6px; text-align:center;">s = 2</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">Average year</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">0%</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">1/3</td>
    </tr>
    <tr>
        <td style="border:1px solid black; padding:6px; text-align:center;">s = 3</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">Bad year</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">−20%</td>
        <td style="border:1px solid black; padding:6px; text-align:center;">1/3</td>
    </tr>
</table>

<p class="alignment">Từ dữ liệu trên, hãy lập mô hình tính toán để tối đa hóa lợi nhuận kỳ vọng cho người nông dân.</p>

  <p><a href="../blog.html">← Back to Blog List</a></p>
  </main>
</body>
</html>
